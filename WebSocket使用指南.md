# 抖音直播间WebSocket自动OBS控制器使用指南

## 🎯 功能特性

✅ **自动化功能**：
- 通过WebSocket连接OBS Studio
- 根据直播间在线人数自动排序
- 自动切换到人气最高的直播间场景
- 实时监控动态调整

✅ **智能控制**：
- 精确到个位的在线人数显示
- 数据源优先级：stats → room_view_stats → user_count_str
- 每10秒自动检查并切换场景
- 支持多直播间同时监控

## 📋 使用步骤

### 1. 安装依赖
```bash
pip install websockets
```

### 2. 配置OBS WebSocket
1. 打开OBS Studio
2. 点击 **工具 → WebSocket服务器设置**
3. 勾选 **启用WebSocket服务器**
4. 设置端口为 **4455**（默认）
5. 可选择设置密码（推荐为空，便于测试）

### 3. 准备直播间列表
确保 `live_url.txt` 文件包含要监控的直播间URL：
```
https://live.douyin.com/27356915698
https://live.douyin.com/847308587035
https://live.douyin.com/858106419879
https://live.douyin.com/751228538796
https://live.douyin.com/739673553798
https://live.douyin.com/893598446272
```

### 4. 运行WebSocket控制器
```bash
python obs_websocket_controller.py
```

## 🎬 OBS场景自动管理

### 自动创建场景
程序将自动为每个直播间创建场景，格式：
- `直播间1_旧时光` (人气最高)
- `直播间2_妙2` (第二高)
- `直播间3_新疆棉棉袜工厂店` (第三高)
- ...

### 自动切换逻辑
1. **实时监控**：每10秒检查所有直播间在线人数
2. **智能排序**：按人数降序自动排序
3. **场景切换**：自动切换到当前人气最高的直播间
4. **动态调整**：人气变化时立即调整场景

### 浏览器源设置
- **URL**：自动使用直播间链接
- **分辨率**：1920x1080
- **帧率**：30FPS
- **自动刷新**：跟随人气排序

## 📊 监控界面显示

```
================================================================================
🎬 抖音直播间WebSocket自动OBS控制器
================================================================================
📅 更新时间: 2025-09-02 15:52:30
🔗 OBS连接状态: ✅ 已连接
🎯 当前场景: 直播间1_旧时光
🏆 目标场景: 直播间1_旧时光
================================================================================

📊 直播间排序（按在线人数降序）:
--------------------------------------------------------------------------------
   1. 🔴 旧时光              -    826人
   2. 🔴 妙2               -    176人
   3. 🔴 新疆棉棉袜工厂店     -     62人
   4. 🔴 安家直播            -     55人
   5. 🔴 小辉哥直播运营       -      9人
--------------------------------------------------------------------------------
💡 自动控制说明:
   • 每10秒检查一次排序
   • 自动切换到人气最高的直播间
   • 人数变化时自动调整场景
   • 按Ctrl+C停止自动控制
================================================================================
```

---
**享受自动化的OBS直播间切换体验！** 🎉